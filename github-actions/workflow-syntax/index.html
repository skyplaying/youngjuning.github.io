<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <meta name="title" content="洛竹的官方网站" />
    <meta name="keywords" content="react, javascript, typescript" />
    <meta name="description" content="怕什么真理无穷，进一寸有一寸的欢喜" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://i.loli.net/2021/01/07/LkH3VM6oBnIuFNi.png"
    />
    <link rel="stylesheet" href="/umi.26fedac2.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.4.2
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.includes(e) ? e : r[0]
        );
      })();
    </script>
    <title>工作流语法</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/github-actions/workflow-syntax" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;https://i.loli.net/2021/01/07/LkH3VM6oBnIuFNi.png&#x27;)" href="/">洛竹的官方网站</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span><a href="/blog">博客</a></span><span><a href="/awesome">收藏</a></span><span><a href="/about">关于</a></span><span><a href="/leetcode">算法</a></span><span><a href="/links">友链</a></span><span>洛竹文档⤵️<ul><li><a href="/cobra"> Cobra</a></li><li><a href="/viper"> Viper</a></li><li><a aria-current="page" class="active" href="/github-actions"> GitHub Actions</a></li></ul></span><span><a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/user/325111174662855/posts">掘金<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><span><a target="_blank" rel="noopener noreferrer" href="https://www.zhihu.com/people/yangjunning">知乎<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><ul><li><a target="_blank" rel="noopener noreferrer" href="https://www.zhihu.com/column/c_1341734653628149760">前端早茶馆<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></span><span><a target="_blank" rel="noopener noreferrer" href="https://github.com/youngjuning/youngjuning.github.io">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;https://i.loli.net/2021/01/07/LkH3VM6oBnIuFNi.png&#x27;)" href="/"></a><h1>洛竹的官方网站</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/blog">博客</a></li><li><a href="/awesome">收藏</a></li><li><a href="/about">关于</a></li><li><a href="/leetcode">算法</a></li><li><a href="/links">友链</a></li><li>洛竹文档⤵️<ul><li><a href="/cobra"> Cobra</a></li><li><a href="/viper"> Viper</a></li><li><a aria-current="page" class="active" href="/github-actions"> GitHub Actions</a></li></ul></li><li><a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/user/325111174662855/posts">掘金<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://www.zhihu.com/people/yangjunning">知乎<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><ul><li><a target="_blank" rel="noopener noreferrer" href="https://www.zhihu.com/column/c_1341734653628149760">前端早茶馆<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/youngjuning/youngjuning.github.io">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/github-actions">GitHub Actions 手册</a></li><li><a aria-current="page" class="active" href="/github-actions/workflow-syntax">工作流语法</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="About YAML syntax for workflows" data-depth="3"><a href="/github-actions/workflow-syntax#about-yaml-syntax-for-workflows"><span>About YAML syntax for workflows</span></a></li><li title="name" data-depth="3"><a href="/github-actions/workflow-syntax#name"><span>name</span></a></li><li title="on" data-depth="3"><a href="/github-actions/workflow-syntax#on"><span>on</span></a></li><li title="on.&lt;event_name&gt;.types" data-depth="3"><a href="/github-actions/workflow-syntax#onevent_nametypes"><span>on.&lt;event_name&gt;.types</span></a></li><li title="on.&lt;push|pull_request&gt;.&lt;branches|tags&gt;" data-depth="3"><a href="/github-actions/workflow-syntax#onpushpull_requestbranchestags"><span>on.&lt;push|pull_request&gt;.&lt;branches|tags&gt;</span></a></li><li title="on.&lt;push|pull_request&gt;.paths" data-depth="3"><a href="/github-actions/workflow-syntax#onpushpull_requestpaths"><span>on.&lt;push|pull_request&gt;.paths</span></a></li><li title="on.schedule" data-depth="3"><a href="/github-actions/workflow-syntax#onschedule"><span>on.schedule</span></a></li><li title="env" data-depth="3"><a href="/github-actions/workflow-syntax#env"><span>env</span></a></li><li title="defaults" data-depth="3"><a href="/github-actions/workflow-syntax#defaults"><span>defaults</span></a></li><li title="defaults.run" data-depth="3"><a href="/github-actions/workflow-syntax#defaultsrun"><span>defaults.run</span></a></li><li title="jobs" data-depth="3"><a href="/github-actions/workflow-syntax#jobs"><span>jobs</span></a></li><li title="jobs.&lt;job_id&gt;" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_id"><span>jobs.&lt;job_id&gt;</span></a></li><li title="jobs.&lt;job_id&gt;.name" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idname"><span>jobs.&lt;job_id&gt;.name</span></a></li><li title="jobs.&lt;job_id&gt;.needs" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idneeds"><span>jobs.&lt;job_id&gt;.needs</span></a></li><li title="jobs.&lt;job_id&gt;.runs-on" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idruns-on"><span>jobs.&lt;job_id&gt;.runs-on</span></a></li><li title="jobs.&lt;job_id&gt;.environment" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idenvironment"><span>jobs.&lt;job_id&gt;.environment</span></a></li><li title="jobs.&lt;job_id&gt;.outputs" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idoutputs"><span>jobs.&lt;job_id&gt;.outputs</span></a></li><li title="jobs.&lt;job_id&gt;.env" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idenv"><span>jobs.&lt;job_id&gt;.env</span></a></li><li title="jobs.&lt;job_id&gt;.defaults" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_iddefaults"><span>jobs.&lt;job_id&gt;.defaults</span></a></li><li title="jobs.&lt;job_id&gt;.defaults.run" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_iddefaultsrun"><span>jobs.&lt;job_id&gt;.defaults.run</span></a></li><li title="jobs.&lt;job_id&gt;.if" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idif"><span>jobs.&lt;job_id&gt;.if</span></a></li><li title="jobs.&lt;job_id&gt;.steps" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idsteps"><span>jobs.&lt;job_id&gt;.steps</span></a></li><li title="jobs.&lt;job_id&gt;.steps[*].id" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstepsid"><span>jobs.&lt;job_id&gt;.steps[*].id</span></a></li><li title="jobs.&lt;job_id&gt;.steps[*].if" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstepsif"><span>jobs.&lt;job_id&gt;.steps[*].if</span></a></li><li title="jobs.&lt;job_id&gt;.steps[*].name" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstepsname"><span>jobs.&lt;job_id&gt;.steps[*].name</span></a></li><li title="jobs.&lt;job_id&gt;.steps[*].uses" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstepsuses"><span>jobs.&lt;job_id&gt;.steps[*].uses</span></a></li><li title="jobs.&lt;job_id&gt;.steps[*].run" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstepsrun"><span>jobs.&lt;job_id&gt;.steps[*].run</span></a></li><li title="jobs.&lt;job_id&gt;.steps[*].with" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstepswith"><span>jobs.&lt;job_id&gt;.steps[*].with</span></a></li><li title="jobs.&lt;job_id&gt;.steps[*].with.args" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstepswithargs"><span>jobs.&lt;job_id&gt;.steps[*].with.args</span></a></li><li title="jobs.&lt;job_id&gt;.steps[*].with.entrypoint" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstepswithentrypoint"><span>jobs.&lt;job_id&gt;.steps[*].with.entrypoint</span></a></li><li title="jobs.&lt;job_id&gt;.steps[*].env" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstepsenv"><span>jobs.&lt;job_id&gt;.steps[*].env</span></a></li><li title="jobs.&lt;job_id&gt;.steps[*].continue-on-error" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstepscontinue-on-error"><span>jobs.&lt;job_id&gt;.steps[*].continue-on-error</span></a></li><li title="jobs.&lt;job_id&gt;.steps[*].timeout-minutes" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstepstimeout-minutes"><span>jobs.&lt;job_id&gt;.steps[*].timeout-minutes</span></a></li><li title="jobs.&lt;job_id&gt;.timeout-minutes" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idtimeout-minutes"><span>jobs.&lt;job_id&gt;.timeout-minutes</span></a></li><li title="jobs.&lt;job_id&gt;.strategy" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstrategy"><span>jobs.&lt;job_id&gt;.strategy</span></a></li><li title="jobs.&lt;job_id&gt;.strategy.matrix" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstrategymatrix"><span>jobs.&lt;job_id&gt;.strategy.matrix</span></a></li><li title="jobs.&lt;job_id&gt;.strategy.fail-fast" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstrategyfail-fast"><span>jobs.&lt;job_id&gt;.strategy.fail-fast</span></a></li><li title="jobs.&lt;job_id&gt;.strategy.max-parallel" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idstrategymax-parallel"><span>jobs.&lt;job_id&gt;.strategy.max-parallel</span></a></li><li title="jobs.&lt;job_id&gt;.continue-on-error" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idcontinue-on-error"><span>jobs.&lt;job_id&gt;.continue-on-error</span></a></li><li title="jobs.&lt;job_id&gt;.container" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idcontainer"><span>jobs.&lt;job_id&gt;.container</span></a></li><li title="jobs.&lt;job_id&gt;.container.image" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idcontainerimage"><span>jobs.&lt;job_id&gt;.container.image</span></a></li><li title="jobs.&lt;job_id&gt;.container.credentials" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idcontainercredentials"><span>jobs.&lt;job_id&gt;.container.credentials</span></a></li><li title="jobs.&lt;job_id&gt;.container.env" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idcontainerenv"><span>jobs.&lt;job_id&gt;.container.env</span></a></li><li title="jobs.&lt;job_id&gt;.container.ports" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idcontainerports"><span>jobs.&lt;job_id&gt;.container.ports</span></a></li><li title="jobs.&lt;job_id&gt;.container.volumes" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idcontainervolumes"><span>jobs.&lt;job_id&gt;.container.volumes</span></a></li><li title="jobs.&lt;job_id&gt;.container.options" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idcontaineroptions"><span>jobs.&lt;job_id&gt;.container.options</span></a></li><li title="jobs.&lt;job_id&gt;.services" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idservices"><span>jobs.&lt;job_id&gt;.services</span></a></li><li title="jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.image" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idimage"><span>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.image</span></a></li><li title="jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.credentials" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idcredentials"><span>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.credentials</span></a></li><li title="jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.env" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idenv"><span>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.env</span></a></li><li title="jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.ports" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idports"><span>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.ports</span></a></li><li title="jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.volumes" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idvolumes"><span>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.volumes</span></a></li><li title="jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.options" data-depth="3"><a href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idoptions"><span>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.options</span></a></li><li title="Filter pattern cheat sheet" data-depth="3"><a href="/github-actions/workflow-syntax#filter-pattern-cheat-sheet"><span>Filter pattern cheat sheet</span></a></li></ul><div class="__dumi-default-layout-content"><div style="display:flex;justify-content:center"><img width="70%"/></div><div class="markdown"><h3 id="about-yaml-syntax-for-workflows"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#about-yaml-syntax-for-workflows"><span class="icon icon-link"></span></a>About YAML syntax for workflows</h3><p>Workflow files use YAML syntax, and must have either a <code>.yml</code> or <code>.yaml</code> file extension. If you&#x27;re new to YAML and want to learn more, see &quot;<a target="_blank" rel="noopener noreferrer" href="https://www.codeproject.com/Articles/1214409/Learn-YAML-in-five-minutes">Learn YAML in five minutes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.&quot;</p><p>You must store workflow files in the <code>.github/workflows</code> directory of your repository.</p><h3 id="name"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#name"><span class="icon icon-link"></span></a><code>name</code></h3><p>The name of your workflow. <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> displays the names of your workflows on your repository&#x27;s actions page. If you omit <code>name</code>, <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> sets it to the workflow file path relative to the root of the repository.</p><h3 id="on"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#on"><span class="icon icon-link"></span></a><code>on</code></h3><p><strong>Required</strong>. The name of the <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> event that triggers the workflow. You can provide a single event <code>string</code>, <code>array</code> of events, <code>array</code> of event <code>types</code>, or an event configuration <code>map</code> that schedules a workflow or restricts the execution of a workflow to specific files, tags, or branch changes. For a list of available events, see &quot;<a href="/articles/events-that-trigger-workflows">Events that trigger workflows</a>.&quot;</p><p>{<!-- -->% data reusables.github-actions.actions-on-examples %<!-- -->}</p><h3 id="onevent_nametypes"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#onevent_nametypes"><span class="icon icon-link"></span></a><code>on.&lt;event_name&gt;.types</code></h3><p>Selects the types of activity that will trigger a workflow run. Most GitHub events are triggered by more than one type of activity. For example, the event for the release resource is triggered when a release is <code>published</code>, <code>unpublished</code>, <code>created</code>, <code>edited</code>, <code>deleted</code>, or <code>prereleased</code>. The <code>types</code> keyword enables you to narrow down activity that causes the workflow to run. When only one activity type triggers a webhook event, the <code>types</code> keyword is unnecessary.</p><p>You can use an array of event <code>types</code>. For more information about each event and their activity types, see &quot;<a href="/articles/events-that-trigger-workflows#webhook-events">Events that trigger workflows</a>.&quot;</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># Trigger the workflow on pull request activity</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">release</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment"># Only use the types keyword to narrow down the activity types that will trigger your workflow.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">types</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">published</span><span class="token punctuation">,</span><span class="token plain"> created</span><span class="token punctuation">,</span><span class="token plain"> edited</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="onpushpull_requestbranchestags"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#onpushpull_requestbranchestags"><span class="icon icon-link"></span></a><code>on.&lt;push|pull_request&gt;.&lt;branches|tags&gt;</code></h3><p>When using the <code>push</code> and <code>pull_request</code> events, you can configure a workflow to run on specific branches or tags. For a <code>pull_request</code> event, only branches and tags on the base are evaluated. If you define only <code>tags</code> or only <code>branches</code>, the workflow won&#x27;t run for events affecting the undefined Git ref.</p><p>The <code>branches</code>, <code>branches-ignore</code>, <code>tags</code>, and <code>tags-ignore</code> keywords accept glob patterns that use the <code>*</code> and <code>**</code> wildcard characters to match more than one branch or tag name. For more information, see the &quot;<a href="/github-actions/workflow-syntax#filter-pattern-cheat-sheet">Filter pattern cheat sheet</a>.&quot;</p><h4 id="example-including-branches-and-tags"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-including-branches-and-tags"><span class="icon icon-link"></span></a>Example including branches and tags</h4><p>The patterns defined in <code>branches</code> and <code>tags</code> are evaluated against the Git ref&#x27;s name. For example, defining the pattern <code>mona/octocat</code> in <code>branches</code> will match the <code>refs/heads/mona/octocat</code> Git ref. The pattern <code>releases/**</code> will match the <code>refs/heads/releases/10</code> Git ref.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">on</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">push</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment"># Sequence of patterns matched against refs/heads</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">branches</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment"># Push events on main branch</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> main</span></div><div class="token-line"><span class="token plain">      </span><span class="token comment"># Push events to branches matching refs/heads/mona/octocat</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token string">&#x27;mona/octocat&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment"># Push events to branches matching refs/heads/releases/10</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token string">&#x27;releases/**&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment"># Sequence of patterns matched against refs/tags</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">tags</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> v1 </span><span class="token comment"># Push events to v1 tag</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> v1.* </span><span class="token comment"># Push events to v1.0, v1.1, and v1.9 tags</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-ignoring-branches-and-tags"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-ignoring-branches-and-tags"><span class="icon icon-link"></span></a>Example ignoring branches and tags</h4><p>Anytime a pattern matches the <code>branches-ignore</code> or <code>tags-ignore</code> pattern, the workflow will not run. The patterns defined in <code>branches-ignore</code> and <code>tags-ignore</code> are evaluated against the Git ref&#x27;s name. For example, defining the pattern <code>mona/octocat</code> in <code>branches</code> will match the <code>refs/heads/mona/octocat</code> Git ref. The pattern <code>releases/**-alpha</code> in <code>branches</code> will match the <code>refs/releases/beta/3-alpha</code> Git ref.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">on</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">push</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment"># Sequence of patterns matched against refs/heads</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">branches-ignore</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment"># Push events to branches matching refs/heads/mona/octocat</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token string">&#x27;mona/octocat&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment"># Push events to branches matching refs/heads/releases/beta/3-alpha</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token string">&#x27;releases/**-alpha&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment"># Sequence of patterns matched against refs/tags</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">tags-ignore</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> v1.* </span><span class="token comment"># Push events to tags v1.0, v1.1, and v1.9</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="excluding-branches-and-tags"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#excluding-branches-and-tags"><span class="icon icon-link"></span></a>Excluding branches and tags</h4><p>You can use two types of filters to prevent a workflow from running on pushes and pull requests to tags and branches.</p><ul><li><code>branches</code> or <code>branches-ignore</code> - You cannot use both the <code>branches</code> and <code>branches-ignore</code> filters for the same event in a workflow. Use the <code>branches</code> filter when you need to filter branches for positive matches and exclude branches. Use the <code>branches-ignore</code> filter when you only need to exclude branch names.</li><li><code>tags</code> or <code>tags-ignore</code> - You cannot use both the <code>tags</code> and <code>tags-ignore</code> filters for the same event in a workflow. Use the <code>tags</code> filter when you need to filter tags for positive matches and exclude tags. Use the <code>tags-ignore</code> filter when you only need to exclude tag names.</li></ul><h4 id="example-using-positive-and-negative-patterns"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-positive-and-negative-patterns"><span class="icon icon-link"></span></a>Example using positive and negative patterns</h4><p>You can exclude <code>tags</code> and <code>branches</code> using the <code>!</code> character. The order that you define patterns matters.</p><ul><li>A matching negative pattern (prefixed with <code>!</code>) after a positive match will exclude the Git ref.</li><li>A matching positive pattern after a negative match will include the Git ref again.</li></ul><p>The following workflow will run on pushes to <code>releases/10</code> or <code>releases/beta/mona</code>, but not on <code>releases/10-alpha</code> or <code>releases/beta/3-alpha</code> because the negative pattern <code>!releases/**-alpha</code> follows the positive pattern.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">on</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">push</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">branches</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token string">&#x27;releases/**&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token string">&#x27;!releases/**-alpha&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="onpushpull_requestpaths"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#onpushpull_requestpaths"><span class="icon icon-link"></span></a><code>on.&lt;push|pull_request&gt;.paths</code></h3><p>When using the <code>push</code> and <code>pull_request</code> events, you can configure a workflow to run when at least one file does not match <code>paths-ignore</code> or at least one modified file matches the configured <code>paths</code>. Path filters are not evaluated for pushes to tags.</p><p>The <code>paths-ignore</code> and <code>paths</code> keywords accept glob patterns that use the <code>*</code> and <code>**</code> wildcard characters to match more than one path name. For more information, see the &quot;<a href="/github-actions/workflow-syntax#filter-pattern-cheat-sheet">Filter pattern cheat sheet</a>.&quot;</p><h4 id="example-ignoring-paths"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-ignoring-paths"><span class="icon icon-link"></span></a>Example ignoring paths</h4><p>Anytime a path name matches a pattern in <code>paths-ignore</code>, the workflow will not run. <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> evaluates patterns defined in <code>paths-ignore</code> against the path name. A workflow with the following path filter will only run on <code>push</code> events that include at least one file outside the <code>docs</code> directory at the root of the repository.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">on</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">push</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">paths-ignore</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token string">&#x27;docs/**&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-including-paths"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-including-paths"><span class="icon icon-link"></span></a>Example including paths</h4><p>If at least one path matches a pattern in the <code>paths</code> filter, the workflow runs. To trigger a build anytime you push a JavaScript file, you can use a wildcard pattern.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">on</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">push</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">paths</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token string">&#x27;**.js&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="excluding-paths"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#excluding-paths"><span class="icon icon-link"></span></a>Excluding paths</h4><p>You can exclude paths using two types of filters. You cannot use both of these filters for the same event in a workflow.</p><ul><li><code>paths-ignore</code> - Use the <code>paths-ignore</code> filter when you only need to exclude path names.</li><li><code>paths</code> - Use the <code>paths</code> filter when you need to filter paths for positive matches and exclude paths.</li></ul><h4 id="example-using-positive-and-negative-patterns-1"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-positive-and-negative-patterns-1"><span class="icon icon-link"></span></a>Example using positive and negative patterns</h4><p>You can exclude <code>paths</code> using the <code>!</code> character. The order that you define patterns matters:</p><ul><li>A matching negative pattern (prefixed with <code>!</code>) after a positive match will exclude the path.</li><li>A matching positive pattern after a negative match will include the path again.</li></ul><p>This example runs anytime the <code>push</code> event includes a file in the <code>sub-project</code> directory or its subdirectories, unless the file is in the <code>sub-project/docs</code> directory. For example, a push that changed <code>sub-project/index.js</code> or <code>sub-project/src/index.js</code> will trigger a workflow run, but a push changing only <code>sub-project/docs/readme.md</code> will not.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">on</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">push</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">paths</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token string">&#x27;sub-project/**&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token string">&#x27;!sub-project/docs/**&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="git-diff-comparisons"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#git-diff-comparisons"><span class="icon icon-link"></span></a>Git diff comparisons</h4><p>{<!-- -->% note %<!-- -->}</p><p><strong>Note:</strong> If you push more than 1,000 commits, or if <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> does not generate the diff due to a timeout (diffs that are too large diffs), the workflow will always run.</p><p>{<!-- -->% endnote %<!-- -->}</p><p>The filter determines if a workflow should run by evaluating the changed files and running them against the <code>paths-ignore</code> or <code>paths</code> list. If there are no files changed, the workflow will not run.</p><p>{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> generates the list of changed files using two-dot diffs for pushes and three-dot diffs for pull requests:</p><ul><li><strong>Pull requests:</strong> Three-dot diffs are a comparison between the most recent version of the topic branch and the commit where the topic branch was last synced with the base branch.</li><li><strong>Pushes to existing branches:</strong> A two-dot diff compares the head and base SHAs directly with each other.</li><li><strong>Pushes to new branches:</strong> A two-dot diff against the parent of the ancestor of the deepest commit pushed.</li></ul><p>For more information, see &quot;<a href="/articles/about-comparing-branches-in-pull-requests">About comparing branches in pull requests</a>.&quot;</p><h3 id="onschedule"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#onschedule"><span class="icon icon-link"></span></a><code>on.schedule</code></h3><p>{<!-- -->% data reusables.repositories.actions-scheduled-workflow-example %<!-- -->}</p><p>For more information about cron syntax, see &quot;<a href="/actions/automating-your-workflow-with-github-actions/events-that-trigger-workflows#scheduled-events">Events that trigger workflows</a>.&quot;</p><h3 id="env"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#env"><span class="icon icon-link"></span></a><code>env</code></h3><p>A <code>map</code> of environment variables that are available to the steps of all jobs in the workflow. You can also set environment variables that are only available to the steps of a single job or to a single step. For more information, see <a href="/github-actions/workflow-syntax#jobsjob_idenv"><code>jobs.&lt;job_id&gt;.env</code></a> and <a href="/github-actions/workflow-syntax#jobsjob_idstepsenv"><code>jobs.&lt;job_id&gt;.steps[*].env</code></a>.</p><p>{<!-- -->% data reusables.repositories.actions-env-var-note %<!-- -->}</p><h4 id="example"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example"><span class="icon icon-link"></span></a>Example</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">env</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">SERVER</span><span class="token punctuation">:</span><span class="token plain"> production</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="defaults"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#defaults"><span class="icon icon-link"></span></a><code>defaults</code></h3><p>A <code>map</code> of default settings that will apply to all jobs in the workflow. You can also set default settings that are only available to a job. For more information, see <a href="/github-actions/workflow-syntax#jobsjob_iddefaults"><code>jobs.&lt;job_id&gt;.defaults</code></a>.</p><p>{<!-- -->% data reusables.github-actions.defaults-override %<!-- -->}</p><h3 id="defaultsrun"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#defaultsrun"><span class="icon icon-link"></span></a><code>defaults.run</code></h3><p>You can provide default <code>shell</code> and <code>working-directory</code> options for all <a href="/github-actions/workflow-syntax#jobsjob_idstepsrun"><code>run</code></a> steps in a workflow. You can also set default settings for <code>run</code> that are only available to a job. For more information, see <a href="/github-actions/workflow-syntax#jobsjob_iddefaultsrun"><code>jobs.&lt;job_id&gt;.defaults.run</code></a>. You cannot use contexts or expressions in this keyword.</p><p>{<!-- -->% data reusables.github-actions.defaults-override %<!-- -->}</p><h4 id="example-1"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-1"><span class="icon icon-link"></span></a>Example</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">defaults</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">shell</span><span class="token punctuation">:</span><span class="token plain"> bash</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">working-directory</span><span class="token punctuation">:</span><span class="token plain"> scripts</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobs"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobs"><span class="icon icon-link"></span></a><code>jobs</code></h3><p>A workflow run is made up of one or more jobs. Jobs run in parallel by default. To run jobs sequentially, you can define dependencies on other jobs using the <code>jobs.&lt;job_id&gt;.needs</code> keyword.</p><p>Each job runs in a runner environment specified by <code>runs-on</code>.</p><p>You can run an unlimited number of jobs as long as you are within the workflow usage limits. For more information, see &quot;<a href="/actions/reference/usage-limits-billing-and-administration">Usage limits and billing</a>&quot; for <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- -->-hosted runners and &quot;<a href="/actions/hosting-your-own-runners/about-self-hosted-runners/#usage-limits">About self-hosted runners</a>&quot; for self-hosted runner usage limits.</p><p>If you need to find the unique identifier of a job running in a workflow run, you can use the <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> API. For more information, see &quot;<a href="/rest/reference/actions#workflow-jobs">Workflow Jobs</a>.&quot;</p><h3 id="jobsjob_id"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_id"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;</code></h3><p>Each job must have an id to associate with the job. The key <code>job_id</code> is a string and its value is a map of the job&#x27;s configuration data. You must replace <code>&lt;job_id&gt;</code> with a string that is unique to the <code>jobs</code> object. The <code>&lt;job_id&gt;</code> must start with a letter or <code>_</code> and contain only alphanumeric characters, <code>-</code>, or <code>_</code>.</p><h4 id="example-2"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-2"><span class="icon icon-link"></span></a>Example</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">my_first_job</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My first job</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">my_second_job</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My second job</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_idname"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idname"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.name</code></h3><p>The name of the job displayed on <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- -->.</p><h3 id="jobsjob_idneeds"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idneeds"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.needs</code></h3><p>Identifies any jobs that must complete successfully before this job will run. It can be a string or array of strings. If a job fails, all jobs that need it are skipped unless the jobs use a conditional expression that causes the job to continue.</p><h4 id="example-requiring-dependent-jobs-to-be-successful"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-requiring-dependent-jobs-to-be-successful"><span class="icon icon-link"></span></a>Example requiring dependent jobs to be successful</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">job1</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">job2</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">needs</span><span class="token punctuation">:</span><span class="token plain"> job1</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">job3</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">needs</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">job1</span><span class="token punctuation">,</span><span class="token plain"> job2</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>In this example, <code>job1</code> must complete successfully before <code>job2</code> begins, and <code>job3</code> waits for both <code>job1</code> and <code>job2</code> to complete.</p><p>The jobs in this example run sequentially:</p><ol><li><code>job1</code></li><li><code>job2</code></li><li><code>job3</code></li></ol><h4 id="example-not-requiring-dependent-jobs-to-be-successful"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-not-requiring-dependent-jobs-to-be-successful"><span class="icon icon-link"></span></a>Example not requiring dependent jobs to be successful</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">job1</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">job2</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">needs</span><span class="token punctuation">:</span><span class="token plain"> job1</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">job3</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">if</span><span class="token punctuation">:</span><span class="token plain"> always()</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">needs</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">job1</span><span class="token punctuation">,</span><span class="token plain"> job2</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>In this example, <code>job3</code> uses the <code>always()</code> conditional expression so that it always runs after <code>job1</code> and <code>job2</code> have completed, regardless of whether they were successful. For more information, see &quot;<a href="/actions/reference/context-and-expression-syntax-for-github-actions#job-status-check-functions">Context and expression syntax</a>.&quot;</p><h3 id="jobsjob_idruns-on"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idruns-on"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.runs-on</code></h3><p><strong>Required</strong>. The type of machine to run the job on. The machine can be either a <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- -->-hosted runner or a self-hosted runner.</p><p>{<!-- -->% data reusables.actions.enterprise-github-hosted-runners %<!-- -->}</p><h4 id="-data-variablesproductprodname_dotcom--hosted-runners"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#-data-variablesproductprodname_dotcom--hosted-runners"><span class="icon icon-link"></span></a>{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- -->-hosted runners</h4><p>If you use a <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- -->-hosted runner, each job runs in a fresh instance of a virtual environment specified by <code>runs-on</code>.</p><p>Available <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- -->-hosted runner types are:</p><p>{<!-- -->% data reusables.github-actions.supported-github-runners %<!-- -->}</p><p>{<!-- -->% data reusables.github-actions.ubuntu-runner-preview %<!-- -->}<!-- -->{<!-- -->% data reusables.github-actions.macos-runner-preview %<!-- -->}</p><h5 id="example-3"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-3"><span class="icon icon-link"></span></a>Example</h5><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token plain">latest</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>For more information, see &quot;<a href="/github/automating-your-workflow-with-github-actions/virtual-environments-for-github-hosted-runners">Virtual environments for <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- -->-hosted runners</a>.&quot;</p><h4 id="self-hosted-runners"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#self-hosted-runners"><span class="icon icon-link"></span></a>Self-hosted runners</h4><p>{<!-- -->% data reusables.github-actions.self-hosted-runner-labels-runs-on %<!-- -->}</p><h5 id="example-4"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-4"><span class="icon icon-link"></span></a>Example</h5><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">self</span><span class="token punctuation">-</span><span class="token plain">hosted</span><span class="token punctuation">,</span><span class="token plain"> linux</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>For more information, see &quot;<a href="/github/automating-your-workflow-with-github-actions/about-self-hosted-runners">About self-hosted runners</a>&quot; and &quot;<a href="/github/automating-your-workflow-with-github-actions/using-self-hosted-runners-in-a-workflow">Using self-hosted runners in a workflow</a>.&quot;</p><p>{<!-- -->% if currentVersion == &quot;free-pro-team@latest&quot; or currentVersion ver_gt &quot;<a href="/github-actions/mailto:enterprise-server@3.0">enterprise-server@3.0</a>&quot; %<!-- -->}</p><h3 id="jobsjob_idenvironment"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idenvironment"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.environment</code></h3><p>The environment that the job references. All environment protection rules must pass before a job referencing the environment is sent to a runner. For more information, see &quot;<a href="/actions/reference/environments">Environments</a>.&quot;</p><p>You can provide the environment as only the environment <code>name</code>, or as an environment object with the <code>name</code> and <code>url</code>. The URL maps to <code>environment_url</code> in the deployments API. For more information about the deployments API, see &quot;<a href="/rest/reference/repos#deployments">Deployments</a>.&quot;</p><h5 id="example-using-a-single-environment-name"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-a-single-environment-name"><span class="icon icon-link"></span></a>Example using a single environment name</h5><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">environment</span><span class="token punctuation">:</span><span class="token plain"> staging_environment</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h5 id="example-using-environment-name-and-url"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-environment-name-and-url"><span class="icon icon-link"></span></a>Example using environment name and URL</h5><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">environment</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> production_environment</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">url</span><span class="token punctuation">:</span><span class="token plain"> https</span><span class="token punctuation">:</span><span class="token plain">//github.com</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>The URL can be an expression and can use any context except for the <code>secrets</code> context. For more information about expressions, see &quot;<a href="/actions/reference/context-and-expression-syntax-for-github-actions">Context and expression syntax for <!-- -->{<!-- -->% data variables.product.prodname_actions %<!-- -->}</a>.&quot;</p><h4 id="example-5"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-5"><span class="icon icon-link"></span></a>Example</h4><p>{<!-- -->% raw %<!-- -->}</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">environment</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> production_environment</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">url</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> steps.step_name.outputs.url_output </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>{<!-- -->% endraw %<!-- -->}<!-- -->{<!-- -->% endif %<!-- -->}</p><h3 id="jobsjob_idoutputs"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idoutputs"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.outputs</code></h3><p>A <code>map</code> of outputs for a job. Job outputs are available to all downstream jobs that depend on this job. For more information on defining job dependencies, see <a href="/github-actions/workflow-syntax#jobsjob_idneeds"><code>jobs.&lt;job_id&gt;.needs</code></a>.</p><p>Job outputs are strings, and job outputs containing expressions are evaluated on the runner at the end of each job. Outputs containing secrets are redacted on the runner and not sent to <!-- -->{<!-- -->% data variables.product.prodname_actions %<!-- -->}<!-- -->.</p><p>To use job outputs in a dependent job, you can use the <code>needs</code> context. For more information, see &quot;<a href="/actions/reference/context-and-expression-syntax-for-github-actions#needs-context">Context and expression syntax for <!-- -->{<!-- -->% data variables.product.prodname_actions %<!-- -->}</a>.&quot;</p><h4 id="example-6"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-6"><span class="icon icon-link"></span></a>Example</h4><p>{<!-- -->% raw %<!-- -->}</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">job1</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token plain">latest</span></div><div class="token-line"><span class="token plain">    </span><span class="token comment"># Map a step output to a job output</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">outputs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">output1</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> steps.step1.outputs.test </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">output2</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> steps.step2.outputs.test </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation">:</span><span class="token plain"> step1</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> echo &quot;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token plain">set</span><span class="token punctuation">-</span><span class="token plain">output name=test</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token plain">hello&quot;</span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation">:</span><span class="token plain"> step2</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> echo &quot;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token plain">set</span><span class="token punctuation">-</span><span class="token plain">output name=test</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token plain">world&quot;</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">job2</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token plain">latest</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">needs</span><span class="token punctuation">:</span><span class="token plain"> job1</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> echo $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain">needs.job1.outputs.output1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain">needs.job1.outputs.output2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>{<!-- -->% endraw %<!-- -->}</p><h3 id="jobsjob_idenv"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idenv"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.env</code></h3><p>A <code>map</code> of environment variables that are available to all steps in the job. You can also set environment variables for the entire workflow or an individual step. For more information, see <a href="/github-actions/workflow-syntax#env"><code>env</code></a> and <a href="/github-actions/workflow-syntax#jobsjob_idstepsenv"><code>jobs.&lt;job_id&gt;.steps[*].env</code></a>.</p><p>{<!-- -->% data reusables.repositories.actions-env-var-note %<!-- -->}</p><h4 id="example-7"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-7"><span class="icon icon-link"></span></a>Example</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">job1</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">env</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">FIRST_NAME</span><span class="token punctuation">:</span><span class="token plain"> Mona</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_iddefaults"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_iddefaults"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.defaults</code></h3><p>A <code>map</code> of default settings that will apply to all steps in the job. You can also set default settings for the entire workflow. For more information, see <a href="/github-actions/workflow-syntax#defaults"><code>defaults</code></a>.</p><p>{<!-- -->% data reusables.github-actions.defaults-override %<!-- -->}</p><h3 id="jobsjob_iddefaultsrun"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_iddefaultsrun"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.defaults.run</code></h3><p>Provide default <code>shell</code> and <code>working-directory</code> to all <code>run</code> steps in the job. Context and expression are not allowed in this section.</p><p>You can provide default <code>shell</code> and <code>working-directory</code> options for all <a href="/github-actions/workflow-syntax#jobsjob_idstepsrun"><code>run</code></a> steps in a job. You can also set default settings for <code>run</code> for the entire workflow. For more information, see <a href="/github-actions/workflow-syntax#defaultsrun"><code>jobs.defaults.run</code></a>. You cannot use contexts or expressions in this keyword.</p><p>{<!-- -->% data reusables.github-actions.defaults-override %<!-- -->}</p><h4 id="example-8"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-8"><span class="icon icon-link"></span></a>Example</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">job1</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token plain">latest</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">defaults</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">shell</span><span class="token punctuation">:</span><span class="token plain"> bash</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">working-directory</span><span class="token punctuation">:</span><span class="token plain"> scripts</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_idif"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idif"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.if</code></h3><p>You can use the <code>if</code> conditional to prevent a job from running unless a condition is met. You can use any supported context and expression to create a conditional.</p><p>{<!-- -->% data reusables.github-actions.expression-syntax-if %<!-- -->}<!-- --> For more information, see &quot;<a href="/actions/reference/context-and-expression-syntax-for-github-actions">Context and expression syntax for <!-- -->{<!-- -->% data variables.product.prodname_actions %<!-- -->}</a>.&quot;</p><h3 id="jobsjob_idsteps"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idsteps"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps</code></h3><p>A job contains a sequence of tasks called <code>steps</code>. Steps can run commands, run setup tasks, or run an action in your repository, a public repository, or an action published in a Docker registry. Not all steps run actions, but all actions run as a step. Each step runs in its own process in the runner environment and has access to the workspace and filesystem. Because steps run in their own process, changes to environment variables are not preserved between steps. <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> provides built-in steps to set up and complete a job.</p><p>You can run an unlimited number of steps as long as you are within the workflow usage limits. For more information, see &quot;<a href="/actions/reference/usage-limits-billing-and-administration">Usage limits and billing</a>&quot; for <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- -->-hosted runners and &quot;<a href="/actions/hosting-your-own-runners/about-self-hosted-runners/#usage-limits">About self-hosted runners</a>&quot; for self-hosted runner usage limits.</p><h4 id="example-9"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-9"><span class="icon icon-link"></span></a>Example</h4><p>{<!-- -->% raw %<!-- -->}</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Greeting from Mona</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation">:</span><span class="token plain"> push</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">my-job</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My Job</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token plain">latest</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Print a greeting</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">env</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">MY_VAR</span><span class="token punctuation">:</span><span class="token plain"> Hi there</span><span class="token tag">!</span><span class="token plain"> My name is</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">FIRST_NAME</span><span class="token punctuation">:</span><span class="token plain"> Mona</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">MIDDLE_NAME</span><span class="token punctuation">:</span><span class="token plain"> The</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">LAST_NAME</span><span class="token punctuation">:</span><span class="token plain"> Octocat</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">|</span><span class="token scalar string"></span></div><div class="token-line"><span class="token scalar string">          echo $MY_VAR $FIRST_NAME $MIDDLE_NAME $LAST_NAME.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>{<!-- -->% endraw %<!-- -->}</p><h3 id="jobsjob_idstepsid"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstepsid"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps[*].id</code></h3><p>A unique identifier for the step. You can use the <code>id</code> to reference the step in contexts. For more information, see &quot;<a href="/actions/reference/context-and-expression-syntax-for-github-actions">Context and expression syntax for <!-- -->{<!-- -->% data variables.product.prodname_actions %<!-- -->}</a>.&quot;</p><h3 id="jobsjob_idstepsif"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstepsif"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps[*].if</code></h3><p>You can use the <code>if</code> conditional to prevent a step from running unless a condition is met. You can use any supported context and expression to create a conditional.</p><p>{<!-- -->% data reusables.github-actions.expression-syntax-if %<!-- -->}<!-- --> For more information, see &quot;<a href="/actions/reference/context-and-expression-syntax-for-github-actions">Context and expression syntax for <!-- -->{<!-- -->% data variables.product.prodname_actions %<!-- -->}</a>.&quot;</p><h4 id="example-using-contexts"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-contexts"><span class="icon icon-link"></span></a>Example using contexts</h4><p>This step only runs when the event type is a <code>pull_request</code> and the event action is <code>unassigned</code>.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My first step</span></div><div class="token-line"><span class="token plain">   </span><span class="token key atrule">if</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain">% raw %</span><span class="token punctuation">}</span><span class="token plain">$</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> github.event_name == &#x27;pull_request&#x27; </span><span class="token important">&amp;&amp;</span><span class="token plain"> github.event.action == &#x27;unassigned&#x27; </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token plain">% endraw %</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> echo This event is a pull request that had an assignee removed.</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-using-status-check-functions"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-status-check-functions"><span class="icon icon-link"></span></a>Example using status check functions</h4><p>The <code>my backup step</code> only runs when the previous step of a job fails. For more information, see &quot;<a href="/actions/reference/context-and-expression-syntax-for-github-actions#job-status-check-functions">Context and expression syntax for <!-- -->{<!-- -->% data variables.product.prodname_actions %<!-- -->}</a>.&quot;</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My first step</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> monacorp/action</span><span class="token punctuation">-</span><span class="token plain">name@main</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My backup step</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">if</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain">% raw %</span><span class="token punctuation">}</span><span class="token plain">$</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> failure() </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token plain">% endraw %</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/heroku@1.0.0</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_idstepsname"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstepsname"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps[*].name</code></h3><p>A name for your step to display on <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- -->.</p><h3 id="jobsjob_idstepsuses"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstepsuses"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps[*].uses</code></h3><p>Selects an action to run as part of a step in your job. An action is a reusable unit of code. You can use an action defined in the same repository as the workflow, a public repository, or in a <a target="_blank" rel="noopener noreferrer" href="https://hub.docker.com/">published Docker container image<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><p>We strongly recommend that you include the version of the action you are using by specifying a Git ref, SHA, or Docker tag number. If you don&#x27;t specify a version, it could break your workflows or cause unexpected behavior when the action owner publishes an update.</p><ul><li>Using the commit SHA of a released action version is the safest for stability and security.</li><li>Using the specific major action version allows you to receive critical fixes and security patches while still maintaining compatibility. It also assures that your workflow should still work.</li><li>Using the default branch of an action may be convenient, but if someone releases a new major version with a breaking change, your workflow could break.</li></ul><p>Some actions require inputs that you must set using the <a href="/github-actions/workflow-syntax#jobsjob_idstepswith"><code>with</code></a> keyword. Review the action&#x27;s README file to determine the inputs required.</p><p>Actions are either JavaScript files or Docker containers. If the action you&#x27;re using is a Docker container you must run the job in a Linux environment. For more details, see <a href="/github-actions/workflow-syntax#jobsjob_idruns-on"><code>runs-on</code></a>.</p><h4 id="example-using-versioned-actions"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-versioned-actions"><span class="icon icon-link"></span></a>Example using versioned actions</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment"># Reference a specific commit</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/setup</span><span class="token punctuation">-</span><span class="token plain">node@c46424eee26de4078d34105d3de3cc4992202b1e</span></div><div class="token-line"><span class="token plain">  </span><span class="token comment"># Reference the major version of a release</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/setup</span><span class="token punctuation">-</span><span class="token plain">node@v1</span></div><div class="token-line"><span class="token plain">  </span><span class="token comment"># Reference a minor version of a release</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/setup</span><span class="token punctuation">-</span><span class="token plain">node@v1.2</span></div><div class="token-line"><span class="token plain">  </span><span class="token comment"># Reference a branch</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/setup</span><span class="token punctuation">-</span><span class="token plain">node@main</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-using-a-public-action"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-a-public-action"><span class="icon icon-link"></span></a>Example using a public action</h4><p><code>{<!-- -->owner<!-- -->}<!-- -->/<!-- -->{<!-- -->repo<!-- -->}<!-- -->@<!-- -->{<!-- -->ref<!-- -->}</code></p><p>You can specific branch, ref, or SHA in a public <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> repository.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">my_first_job</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My first step</span></div><div class="token-line"><span class="token plain">        </span><span class="token comment"># Uses the default branch of a public repository</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/heroku@1.0.0</span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My second step</span></div><div class="token-line"><span class="token plain">        </span><span class="token comment"># Uses a specific version tag of a public repository</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/aws@v2.0.1</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-using-a-public-action-in-a-subdirectory"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-a-public-action-in-a-subdirectory"><span class="icon icon-link"></span></a>Example using a public action in a subdirectory</h4><p><code>{<!-- -->owner<!-- -->}<!-- -->/<!-- -->{<!-- -->repo<!-- -->}<!-- -->/<!-- -->{<!-- -->path<!-- -->}<!-- -->@<!-- -->{<!-- -->ref<!-- -->}</code></p><p>A subdirectory in a public <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> repository at a specific branch, ref, or SHA.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">my_first_job</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My first step</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/aws/ec2@main</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-using-action-in-the-same-repository-as-the-workflow"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-action-in-the-same-repository-as-the-workflow"><span class="icon icon-link"></span></a>Example using action in the same repository as the workflow</h4><p><code>./path/to/dir</code></p><p>The path to the directory that contains the action in your workflow&#x27;s repository. You must check out your repository before using the action.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">my_first_job</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Check out repository</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/checkout@v2</span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Use local my</span><span class="token punctuation">-</span><span class="token plain">action</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> ./.github/actions/my</span><span class="token punctuation">-</span><span class="token plain">action</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-using-a-docker-hub-action"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-a-docker-hub-action"><span class="icon icon-link"></span></a>Example using a Docker Hub action</h4><p><code>docker://<!-- -->{<!-- -->image<!-- -->}<!-- -->:<!-- -->{<!-- -->tag<!-- -->}</code></p><p>A Docker image published on <a target="_blank" rel="noopener noreferrer" href="https://hub.docker.com/">Docker Hub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">my_first_job</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My first step</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> docker</span><span class="token punctuation">:</span><span class="token plain">//alpine</span><span class="token punctuation">:</span><span class="token number">3.8</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-using-a-docker-public-registry-action"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-a-docker-public-registry-action"><span class="icon icon-link"></span></a>Example using a Docker public registry action</h4><p><code>docker://<!-- -->{<!-- -->host<!-- -->}<!-- -->/<!-- -->{<!-- -->image<!-- -->}<!-- -->:<!-- -->{<!-- -->tag<!-- -->}</code></p><p>A Docker image in a public registry.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">my_first_job</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My first step</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> docker</span><span class="token punctuation">:</span><span class="token plain">//gcr.io/cloud</span><span class="token punctuation">-</span><span class="token plain">builders/gradle</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_idstepsrun"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstepsrun"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps[*].run</code></h3><p>Runs command-line programs using the operating system&#x27;s shell. If you do not provide a <code>name</code>, the step name will default to the text specified in the <code>run</code> command.</p><p>Commands run using non-login shells by default. You can choose a different shell and customize the shell used to run commands. For more information, see &quot;<a href="/github-actions/workflow-syntax#using-a-specific-shell">Using a specific shell</a>.&quot;</p><p>Each <code>run</code> keyword represents a new process and shell in the runner environment. When you provide multi-line commands, each line runs in the same shell. For example:</p><ul><li><p>A single-line command:</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Install Dependencies</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> npm install</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div></li><li><p>A multi-line command:</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Clean install dependencies and build</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">|</span><span class="token scalar string"></span></div><div class="token-line"><span class="token scalar string">    npm ci</span></div><div class="token-line"><span class="token scalar string">    npm run build</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div></li></ul><p>Using the <code>working-directory</code> keyword, you can specify the working directory of where to run the command.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Clean temp directory</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> rm </span><span class="token punctuation">-</span><span class="token plain">rf *</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">working-directory</span><span class="token punctuation">:</span><span class="token plain"> ./temp</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="using-a-specific-shell"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#using-a-specific-shell"><span class="icon icon-link"></span></a>Using a specific shell</h4><p>You can override the default shell settings in the runner&#x27;s operating system using the <code>shell</code> keyword. You can use built-in <code>shell</code> keywords, or you can define a custom set of shell options.</p><table><thead><tr><th>Supported platform</th><th><code>shell</code> parameter</th><th>Description</th><th>Command run internally</th></tr></thead><tbody><tr><td>All</td><td><code>bash</code></td><td>The default shell on non-Windows platforms with a fallback to <code>sh</code>. When specifying a bash shell on Windows, the bash shell included with Git for Windows is used.</td><td><code>bash --noprofile --norc -eo pipefail <!-- -->{<!-- -->0<!-- -->}</code></td></tr><tr><td>All</td><td><code>pwsh</code></td><td>The PowerShell Core. <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> appends the extension <code>.ps1</code> to your script name.</td><td><code>pwsh -command &quot;. &#x27;<!-- -->{<!-- -->0<!-- -->}<!-- -->&#x27;&quot;</code></td></tr><tr><td>All</td><td><code>python</code></td><td>Executes the python command.</td><td><code>python <!-- -->{<!-- -->0<!-- -->}</code></td></tr><tr><td>Linux / macOS</td><td><code>sh</code></td><td>The fallback behavior for non-Windows platforms if no shell is provided and <code>bash</code> is not found in the path.</td><td><code>sh -e <!-- -->{<!-- -->0<!-- -->}</code></td></tr><tr><td>Windows</td><td><code>cmd</code></td><td>{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> appends the extension <code>.cmd</code> to your script name and substitutes for <code>{<!-- -->0<!-- -->}</code>.</td><td><code>%ComSpec% /D /E:ON /V:OFF /S /C &quot;CALL &quot;<!-- -->{<!-- -->0<!-- -->}<!-- -->&quot;&quot;</code>.</td></tr><tr><td>Windows</td><td><code>pwsh</code></td><td>This is the default shell used on Windows. The PowerShell Core. <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> appends the extension <code>.ps1</code> to your script name. If your self-hosted Windows runner does not have <em>PowerShell Core</em> installed, then <em>PowerShell Desktop</em> is used instead.</td><td><code>pwsh -command &quot;. &#x27;<!-- -->{<!-- -->0<!-- -->}<!-- -->&#x27;&quot;</code>.</td></tr><tr><td>Windows</td><td><code>powershell</code></td><td>The PowerShell Desktop. <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> appends the extension <code>.ps1</code> to your script name.</td><td><code>powershell -command &quot;. &#x27;<!-- -->{<!-- -->0<!-- -->}<!-- -->&#x27;&quot;</code>.</td></tr></tbody></table><h4 id="example-running-a-script-using-bash"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-running-a-script-using-bash"><span class="icon icon-link"></span></a>Example running a script using bash</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Display the path</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> echo $PATH</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">shell</span><span class="token punctuation">:</span><span class="token plain"> bash</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-running-a-script-using-windows-cmd"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-running-a-script-using-windows-cmd"><span class="icon icon-link"></span></a>Example running a script using Windows <code>cmd</code></h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Display the path</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> echo %PATH%</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">shell</span><span class="token punctuation">:</span><span class="token plain"> cmd</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-running-a-script-using-powershell-core"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-running-a-script-using-powershell-core"><span class="icon icon-link"></span></a>Example running a script using PowerShell Core</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Display the path</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> echo $</span><span class="token punctuation">{</span><span class="token plain">env</span><span class="token punctuation">:</span><span class="token plain">PATH</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">shell</span><span class="token punctuation">:</span><span class="token plain"> pwsh</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-using-powershell-desktop-to-run-a-script"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-powershell-desktop-to-run-a-script"><span class="icon icon-link"></span></a>Example: Using PowerShell Desktop to run a script</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Display the path</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> echo $</span><span class="token punctuation">{</span><span class="token plain">env</span><span class="token punctuation">:</span><span class="token plain">PATH</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">shell</span><span class="token punctuation">:</span><span class="token plain"> powershell</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="example-running-a-python-script"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-running-a-python-script"><span class="icon icon-link"></span></a>Example running a python script</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Display the path</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">|</span><span class="token scalar string"></span></div><div class="token-line"><span class="token scalar string">      import os</span></div><div class="token-line"><span class="token scalar string">      print(os.environ[&#x27;PATH&#x27;])</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">shell</span><span class="token punctuation">:</span><span class="token plain"> python</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="custom-shell"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#custom-shell"><span class="icon icon-link"></span></a>Custom shell</h4><p>You can set the <code>shell</code> value to a template string using <code>command […options] <!-- -->{<!-- -->0<!-- -->}<!-- --> [..more_options]</code>. <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> interprets the first whitespace-delimited word of the string as the command, and inserts the file name for the temporary script at <code>{<!-- -->0<!-- -->}</code>.</p><p>For example:</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Display the environment variables and their values</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">|</span><span class="token scalar string"></span></div><div class="token-line"><span class="token scalar string">      print %ENV</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">shell</span><span class="token punctuation">:</span><span class="token plain"> perl </span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>The command used, <code>perl</code> in this example, must be installed on the runner. For information about the software included on GitHub-hosted runners, see &quot;<a href="/actions/reference/specifications-for-github-hosted-runners#supported-software">Specifications for GitHub-hosted runners</a>.&quot;</p><h4 id="exit-codes-and-error-action-preference"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#exit-codes-and-error-action-preference"><span class="icon icon-link"></span></a>Exit codes and error action preference</h4><p>For built-in shell keywords, we provide the following defaults that are executed by <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- -->-hosted runners. You should use these guidelines when running shell scripts.</p><ul><li><p><code>bash</code>/<code>sh</code>:</p><ul><li>Fail-fast behavior using <code>set -eo pipefail</code>: Default for <code>bash</code> and built-in <code>shell</code>. It is also the default when you don&#x27;t provide an option on non-Windows platforms.</li><li>You can opt out of fail-fast and take full control by providing a template string to the shell options. For example, <code>bash <!-- -->{<!-- -->0<!-- -->}</code>.</li><li>sh-like shells exit with the exit code of the last command executed in a script, which is also the default behavior for actions. The runner will report the status of the step as fail/succeed based on this exit code.</li></ul></li><li><p><code>powershell</code>/<code>pwsh</code></p><ul><li>Fail-fast behavior when possible. For <code>pwsh</code> and <code>powershell</code> built-in shell, we will prepend <code>$ErrorActionPreference = &#x27;stop&#x27;</code> to script contents.</li><li>We append <code>if ((Test-Path -LiteralPath variable:\LASTEXITCODE)) <!-- -->{<!-- --> exit $LASTEXITCODE <!-- -->}</code> to powershell scripts so action statuses reflect the script&#x27;s last exit code.</li><li>Users can always opt out by not using the built-in shell, and providing a custom shell option like: <code>pwsh -File <!-- -->{<!-- -->0<!-- -->}</code>, or <code>powershell -Command &quot;&amp; &#x27;<!-- -->{<!-- -->0<!-- -->}<!-- -->&#x27;&quot;</code>, depending on need.</li></ul></li><li><p><code>cmd</code></p><ul><li>There doesn&#x27;t seem to be a way to fully opt into fail-fast behavior other than writing your script to check each error code and respond accordingly. Because we can&#x27;t actually provide that behavior by default, you need to write this behavior into your script.</li><li><code>cmd.exe</code> will exit with the error level of the last program it executed, and it will return the error code to the runner. This behavior is internally consistent with the previous <code>sh</code> and <code>pwsh</code> default behavior and is the <code>cmd.exe</code> default, so this behavior remains intact.</li></ul></li></ul><h3 id="jobsjob_idstepswith"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstepswith"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps[*].with</code></h3><p>A <code>map</code> of the input parameters defined by the action. Each input parameter is a key/value pair. Input parameters are set as environment variables. The variable is prefixed with <code>INPUT_</code> and converted to upper case.</p><h4 id="example-10"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-10"><span class="icon icon-link"></span></a>Example</h4><p>Defines the three input parameters (<code>first_name</code>, <code>middle_name</code>, and <code>last_name</code>) defined by the <code>hello_world</code> action. These input variables will be accessible to the <code>hello-world</code> action as <code>INPUT_FIRST_NAME</code>, <code>INPUT_MIDDLE_NAME</code>, and <code>INPUT_LAST_NAME</code> environment variables.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">my_first_job</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My first step</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/hello_world@main</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">first_name</span><span class="token punctuation">:</span><span class="token plain"> Mona</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">middle_name</span><span class="token punctuation">:</span><span class="token plain"> The</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">last_name</span><span class="token punctuation">:</span><span class="token plain"> Octocat</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_idstepswithargs"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstepswithargs"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps[*].with.args</code></h3><p>A <code>string</code> that defines the inputs for a Docker container. <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> passes the <code>args</code> to the container&#x27;s <code>ENTRYPOINT</code> when the container starts up. An <code>array of strings</code> is not supported by this parameter.</p><h4 id="example-11"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-11"><span class="icon icon-link"></span></a>Example</h4><p>{<!-- -->% raw %<!-- -->}</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Explain why this job ran</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> monacorp/action</span><span class="token punctuation">-</span><span class="token plain">name@main</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">with</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">entrypoint</span><span class="token punctuation">:</span><span class="token plain"> /bin/echo</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">args</span><span class="token punctuation">:</span><span class="token plain"> The $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> github.event_name </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> event triggered this step.</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>{<!-- -->% endraw %<!-- -->}</p><p>The <code>args</code> are used in place of the <code>CMD</code> instruction in a <code>Dockerfile</code>. If you use <code>CMD</code> in your <code>Dockerfile</code>, use the guidelines ordered by preference:</p><ol><li>Document required arguments in the action&#x27;s README and omit them from the <code>CMD</code> instruction.</li><li>Use defaults that allow using the action without specifying any <code>args</code>.</li><li>If the action exposes a <code>--help</code> flag, or something similar, use that as the default to make your action self-documenting.</li></ol><h3 id="jobsjob_idstepswithentrypoint"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstepswithentrypoint"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps[*].with.entrypoint</code></h3><p>Overrides the Docker <code>ENTRYPOINT</code> in the <code>Dockerfile</code>, or sets it if one wasn&#x27;t already specified. Unlike the Docker <code>ENTRYPOINT</code> instruction which has a shell and exec form, <code>entrypoint</code> keyword accepts only a single string defining the executable to be run.</p><h4 id="example-12"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-12"><span class="icon icon-link"></span></a>Example</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Run a custom command</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> monacorp/action</span><span class="token punctuation">-</span><span class="token plain">name@main</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">with</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">entrypoint</span><span class="token punctuation">:</span><span class="token plain"> /a/different/executable</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>The <code>entrypoint</code> keyword is meant to be used with Docker container actions, but you can also use it with JavaScript actions that don&#x27;t define any inputs.</p><h3 id="jobsjob_idstepsenv"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstepsenv"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps[*].env</code></h3><p>Sets environment variables for steps to use in the runner environment. You can also set environment variables for the entire workflow or a job. For more information, see <a href="/github-actions/workflow-syntax#env"><code>env</code></a> and <a href="/github-actions/workflow-syntax#jobsjob_idenv"><code>jobs.&lt;job_id&gt;.env</code></a>.</p><p>{<!-- -->% data reusables.repositories.actions-env-var-note %<!-- -->}</p><p>Public actions may specify expected environment variables in the README file. If you are setting a secret in an environment variable, you must set secrets using the <code>secrets</code> context. For more information, see &quot;<a href="/actions/automating-your-workflow-with-github-actions/using-environment-variables">Using environment variables</a>&quot; and &quot;<a href="/actions/reference/context-and-expression-syntax-for-github-actions">Context and expression syntax for <!-- -->{<!-- -->% data variables.product.prodname_actions %<!-- -->}</a>.&quot;</p><h4 id="example-13"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-13"><span class="icon icon-link"></span></a>Example</h4><p>{<!-- -->% raw %<!-- -->}</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> My first action</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">env</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">GITHUB_TOKEN</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">FIRST_NAME</span><span class="token punctuation">:</span><span class="token plain"> Mona</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">LAST_NAME</span><span class="token punctuation">:</span><span class="token plain"> Octocat</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>{<!-- -->% endraw %<!-- -->}</p><h3 id="jobsjob_idstepscontinue-on-error"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstepscontinue-on-error"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps[*].continue-on-error</code></h3><p>Prevents a job from failing when a step fails. Set to <code>true</code> to allow a job to pass when this step fails.</p><h3 id="jobsjob_idstepstimeout-minutes"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstepstimeout-minutes"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.steps[*].timeout-minutes</code></h3><p>The maximum number of minutes to run the step before killing the process.</p><h3 id="jobsjob_idtimeout-minutes"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idtimeout-minutes"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.timeout-minutes</code></h3><p>The maximum number of minutes to let a job run before <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> automatically cancels it. Default: 360</p><h3 id="jobsjob_idstrategy"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstrategy"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.strategy</code></h3><p>策略会为您的工作创建构建矩阵。您可以定义不同的变体来运行每个作业。</p><h3 id="jobsjob_idstrategymatrix"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstrategymatrix"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.strategy.matrix</code></h3><p>您可以定义不同作业配置的矩阵。 矩阵允许您通过在单个作业定义中执行变量替换来创建多个作业。 例如，可以使用矩阵为多个受支持的编程语言、操作系统或工具版本创建作业。 矩阵重新使用作业的配置，并为您配置的每个矩阵创建作业。</p><p>作业矩阵在每次工作流程运行时最多可生成 256 个作业。 此限制也适用于自托管运行器。</p><p>您在 matrix 中定义的每个选项都有键和值。 定义的键将成为 matrix 上下文中的属性，您可以在工作流程文件的其他区域中引用该属性。 例如，如果定义包含操作系统数组的键 os，您可以使用 matrix.os 属性作为 runs-on 关键字的值，为每个操作系统创建一个作业。 更多信息请参阅“<a target="_blank" rel="noopener noreferrer" href="https://docs.github.com/cn/actions/reference/context-and-expression-syntax-for-github-actions">GitHub Actions 的上下文和表达式语法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>”。</p><p>定义 matrix 事项的顺序。 定义的第一个选项将是工作流程中运行的第一个作业。</p><h4 id="使用-nodejs-多个版本运行的示例"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#使用-nodejs-多个版本运行的示例"><span class="icon icon-link"></span></a>使用 Node.js 多个版本运行的示例</h4><p>您可以提供配置选项阵列来指定矩阵。 例如，如果运行器支持 Node.js 版本 6、8 和 10，则您可以在 matrix 中指定这些版本的阵列。</p><p>此示例通过设置三个 Node.js 版本阵列的 <code>node</code> 键创建三个作业的矩阵。 为使用矩阵，示例将 <code>matrix.node</code> 上下文属性设置为 <code>setup-node</code> 操作的输入参数 <code>node-version</code>。 因此，将有三个作业运行，每个使用不同的 Node.js 版本。</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">strategy</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">matrix</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">node</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">8</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment"># Configures the node version used on GitHub-hosted runners</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/setup</span><span class="token punctuation">-</span><span class="token plain">node@v1</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">with</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment"># The Node.js version to configure</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">node-version</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> matrix.node </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p><code>setup-node</code> 操作是在使用 GitHub 托管的运行器时建议用于配置 Node.js 版本的方式。 更多信息请参阅 <a target="_blank" rel="noopener noreferrer" href="https://github.com/actions/setup-node">setup-node<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 操作。</p><h4 id="使用多个操作系统的示例"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#使用多个操作系统的示例"><span class="icon icon-link"></span></a>使用多个操作系统的示例</h4><p>您可以创建矩阵以在多个运行器操作系统上运行工作流程。 您也可以指定多个矩阵配置。 此示例创建包含 6 个作业的矩阵：</p><ul><li>在 <code>os</code> 阵列中指定了 2 个操作系统</li><li>在 <code>node</code> 阵列中指定了 3 个 Node.js 版本</li></ul><p>定义操作系统矩阵时，必须将 <code>runs-on</code> 的值设置为您定义的 <code>matrix.os</code> 上下文属性。</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> matrix.os </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">strategy</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">matrix</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">os</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">ubuntu</span><span class="token punctuation">-</span><span class="token number">16.04</span><span class="token punctuation">,</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token number">18.04</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">node</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">8</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation">:</span><span class="token plain"> actions/setup</span><span class="token punctuation">-</span><span class="token plain">node@v1</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">with</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">node-version</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> matrix.node </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>要查找 GitHub 托管的运行器支持的配置选项，请参阅“<a target="_blank" rel="noopener noreferrer" href="https://docs.github.com/cn/actions/automating-your-workflow-with-github-actions/virtual-environments-for-github-hosted-runners">GitHub 托管的运行器的虚拟环境<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>”。</p><h4 id="在组合中包含附加值的示例"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#在组合中包含附加值的示例"><span class="icon icon-link"></span></a>在组合中包含附加值的示例</h4><p>您可以将额外的配置选项添加到已经存在的构建矩阵作业中。 例如，如果要在作业使用 <code>windows-latest</code> 和 <code>node</code> 的版本 4 运行时使用 <code>npm</code> 的特定版本，您可以使用 <code>include</code> 指定该附加选项。</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> matrix.os </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">strategy</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">matrix</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">os</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">macos</span><span class="token punctuation">-</span><span class="token plain">latest</span><span class="token punctuation">,</span><span class="token plain"> windows</span><span class="token punctuation">-</span><span class="token plain">latest</span><span class="token punctuation">,</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token number">18.04</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">node</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">8</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">include</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment"># includes a new variable of npm with a value of 2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment"># for the matrix leg matching the os and version</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">os</span><span class="token punctuation">:</span><span class="token plain"> windows</span><span class="token punctuation">-</span><span class="token plain">latest</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">node</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">npm</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="包括新组合的示例"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#包括新组合的示例"><span class="icon icon-link"></span></a>包括新组合的示例</h4><p>您可以使用 <code>include</code> 将新作业添加到构建矩阵中。 任何不匹配包含配置都会添加到矩阵中。 例如，如果您想要使用 <code>node</code> 版本 12 在多个操作系统上构建，但在 Ubuntu 上需要一个使用节点版本 13 的额外实验性作业，则可使用 <code>include</code> 指定该额外作业。</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> matrix.os </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">strategy</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">matrix</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">node</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">os</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">macos</span><span class="token punctuation">-</span><span class="token plain">latest</span><span class="token punctuation">,</span><span class="token plain"> windows</span><span class="token punctuation">-</span><span class="token plain">latest</span><span class="token punctuation">,</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token number">18.04</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">include</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">node</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">13</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">os</span><span class="token punctuation">:</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token number">18.04</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">experimental</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h4 id="从矩阵中排除配置的示例"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#从矩阵中排除配置的示例"><span class="icon icon-link"></span></a>从矩阵中排除配置的示例</h4><p>您可以使用 <code>exclude</code> 选项删除构建矩阵中定义的特定配置。 使用 <code>exclude</code> 删除由构建矩阵定义的作业。 作业数量是您提供的数组中所包括的操作系统 (<code>os</code>) 数量减去所有减项 (<code>exclude</code>) 后的叉积。</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> matrix.os </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">strategy</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">matrix</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">os</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">macos</span><span class="token punctuation">-</span><span class="token plain">latest</span><span class="token punctuation">,</span><span class="token plain"> windows</span><span class="token punctuation">-</span><span class="token plain">latest</span><span class="token punctuation">,</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token number">18.04</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">node</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">8</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">exclude</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment"># excludes node 4 on macOS</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">os</span><span class="token punctuation">:</span><span class="token plain"> macos</span><span class="token punctuation">-</span><span class="token plain">latest</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">node</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><blockquote><p>注意：所有 <code>include</code> 组合在 <code>exclude</code> 后处理。 这允许您使用 <code>include</code> 添加回以前排除的组合。</p></blockquote><h5 id="在矩阵中使用环境变量"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#在矩阵中使用环境变量"><span class="icon icon-link"></span></a>在矩阵中使用环境变量</h5><p>您可以使用 <code>include</code> 键为每个测试组合添加自定义环境变量。 然后，您可以在后面的步骤中引用自定义环境变量。</p><p>在此示例中，<code>node-version</code> 的矩阵条目每个都被配置为对 <code>site</code> 和 <code>datacenter</code> 环境变量使用不同的值。 <code>Echo site details</code> 步骤然后使用 <code>env: $<!-- -->{<!-- -->{<!-- --> matrix.env <!-- -->}<!-- -->}</code> 引用自定义变量：</p><div class="__dumi-default-code-block"><pre class="prism-code language-yml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Node.js CI</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">push</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token plain">latest</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">strategy</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">matrix</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">include</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">node-version</span><span class="token punctuation">:</span><span class="token plain"> 10.x</span></div><div class="token-line"><span class="token plain">            </span><span class="token key atrule">site</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;prod&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token key atrule">datacenter</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;site-a&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">node-version</span><span class="token punctuation">:</span><span class="token plain"> 12.x</span></div><div class="token-line"><span class="token plain">            </span><span class="token key atrule">site</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;dev&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token key atrule">datacenter</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;site-b&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation">:</span><span class="token plain"> Echo site details</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">env</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">SITE</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> matrix.site </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">DATACENTER</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> matrix.datacenter </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">run</span><span class="token punctuation">:</span><span class="token plain"> echo $SITE $DATACENTER</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_idstrategyfail-fast"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstrategyfail-fast"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.strategy.fail-fast</code></h3><p>When set to <code>true</code>, <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> cancels all in-progress jobs if any <code>matrix</code> job fails. Default: <code>true</code></p><h3 id="jobsjob_idstrategymax-parallel"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idstrategymax-parallel"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.strategy.max-parallel</code></h3><p>The maximum number of jobs that can run simultaneously when using a <code>matrix</code> job strategy. By default, <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> will maximize the number of jobs run in parallel depending on the available runners on <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- -->-hosted virtual machines.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">strategy</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">max-parallel</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_idcontinue-on-error"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idcontinue-on-error"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.continue-on-error</code></h3><p>Prevents a workflow run from failing when a job fails. Set to <code>true</code> to allow a workflow run to pass when this job fails.</p><h4 id="example-preventing-a-specific-failing-matrix-job-from-failing-a-workflow-run"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-preventing-a-specific-failing-matrix-job-from-failing-a-workflow-run"><span class="icon icon-link"></span></a>Example preventing a specific failing matrix job from failing a workflow run</h4><p>You can allow specific jobs in a job matrix to fail without failing the workflow run. For example, if you wanted to only allow an experimental job with <code>node</code> set to <code>13</code> to fail without failing the workflow run.</p><p>{<!-- -->% raw %<!-- -->}</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">runs-on</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> matrix.os </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">continue-on-error</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> matrix.experimental </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">strategy</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">fail-fast</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">matrix</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">node</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">12</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">os</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">macos</span><span class="token punctuation">-</span><span class="token plain">latest</span><span class="token punctuation">,</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token number">18.04</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">experimental</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token boolean important">false</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">include</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token key atrule">node</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">13</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">os</span><span class="token punctuation">:</span><span class="token plain"> ubuntu</span><span class="token punctuation">-</span><span class="token number">18.04</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">experimental</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>{<!-- -->% endraw %<!-- -->}</p><h3 id="jobsjob_idcontainer"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idcontainer"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.container</code></h3><p>A container to run any steps in a job that don&#x27;t already specify a container. If you have steps that use both script and container actions, the container actions will run as sibling containers on the same network with the same volume mounts.</p><p>If you do not set a <code>container</code>, all steps will run directly on the host specified by <code>runs-on</code> unless a step refers to an action configured to run in a container.</p><h4 id="example-14"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-14"><span class="icon icon-link"></span></a>Example</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">my_job</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">container</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation">:</span><span class="token plain"> node</span><span class="token punctuation">:</span><span class="token plain">10.16</span><span class="token punctuation">-</span><span class="token plain">jessie</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">env</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">NODE_ENV</span><span class="token punctuation">:</span><span class="token plain"> development</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">ports</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">volumes</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">-</span><span class="token plain"> my_docker_volume</span><span class="token punctuation">:</span><span class="token plain">/volume_mount</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">options</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">-</span><span class="token punctuation">-</span><span class="token plain">cpus 1</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>When you only specify a container image, you can omit the <code>image</code> keyword.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">my_job</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">container</span><span class="token punctuation">:</span><span class="token plain"> node</span><span class="token punctuation">:</span><span class="token plain">10.16</span><span class="token punctuation">-</span><span class="token plain">jessie</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_idcontainerimage"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idcontainerimage"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.container.image</code></h3><p>The Docker image to use as the container to run the action. The value can be the Docker Hub image name or a <!-- -->{<!-- -->% if enterpriseServerVersions contains currentVersion and currentVersion ver_lt &quot;<a href="/github-actions/mailto:enterprise-server@2.23">enterprise-server@2.23</a>&quot; %<!-- -->}<!-- -->public<!-- -->{<!-- -->% endif %<!-- -->}<!-- --> registry name.</p><p>{<!-- -->% if currentVersion == &quot;free-pro-team@latest&quot; or currentVersion ver_gt &quot;<a href="/github-actions/mailto:enterprise-server@2.22">enterprise-server@2.22</a>&quot; %<!-- -->}</p><h3 id="jobsjob_idcontainercredentials"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idcontainercredentials"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.container.credentials</code></h3><p>{<!-- -->% data reusables.actions.registry-credentials %<!-- -->}</p><h4 id="example-15"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-15"><span class="icon icon-link"></span></a>Example</h4><p>{<!-- -->% raw %<!-- -->}</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">container</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">image</span><span class="token punctuation">:</span><span class="token plain"> ghcr.io/owner/image</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">credentials</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> github.actor </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> secrets.ghcr_token </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>{<!-- -->% endraw %<!-- -->}<!-- -->{<!-- -->% endif %<!-- -->}</p><h3 id="jobsjob_idcontainerenv"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idcontainerenv"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.container.env</code></h3><p>Sets a <code>map</code> of environment variables in the container.</p><h3 id="jobsjob_idcontainerports"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idcontainerports"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.container.ports</code></h3><p>Sets an <code>array</code> of ports to expose on the container.</p><h3 id="jobsjob_idcontainervolumes"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idcontainervolumes"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.container.volumes</code></h3><p>Sets an <code>array</code> of volumes for the container to use. You can use volumes to share data between services or other steps in a job. You can specify named Docker volumes, anonymous Docker volumes, or bind mounts on the host.</p><p>To specify a volume, you specify the source and destination path:</p><p><code>&lt;source&gt;:&lt;destinationPath&gt;</code>.</p><p>The <code>&lt;source&gt;</code> is a volume name or an absolute path on the host machine, and <code>&lt;destinationPath&gt;</code> is an absolute path in the container.</p><h4 id="example-16"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-16"><span class="icon icon-link"></span></a>Example</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">volumes</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> my_docker_volume</span><span class="token punctuation">:</span><span class="token plain">/volume_mount</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> /data/my_data</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> /source/directory</span><span class="token punctuation">:</span><span class="token plain">/destination/directory</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_idcontaineroptions"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idcontaineroptions"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.container.options</code></h3><p>Additional Docker container resource options. For a list of options, see &quot;<a target="_blank" rel="noopener noreferrer" href="https://docs.docker.com/engine/reference/commandline/create/#options"><code>docker create</code> options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.&quot;</p><h3 id="jobsjob_idservices"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idservices"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.services</code></h3><p>{<!-- -->% data reusables.github-actions.docker-container-os-support %<!-- -->}</p><p>Used to host service containers for a job in a workflow. Service containers are useful for creating databases or cache services like Redis. The runner automatically creates a Docker network and manages the life cycle of the service containers.</p><p>If you configure your job to run in a container, or your step uses container actions, you don&#x27;t need to map ports to access the service or action. Docker automatically exposes all ports between containers on the same Docker user-defined bridge network. You can directly reference the service container by its hostname. The hostname is automatically mapped to the label name you configure for the service in the workflow.</p><p>If you configure the job to run directly on the runner machine and your step doesn&#x27;t use a container action, you must map any required Docker service container ports to the Docker host (the runner machine). You can access the service container using localhost and the mapped port.</p><p>For more information about the differences between networking service containers, see &quot;<a href="/actions/automating-your-workflow-with-github-actions/about-service-containers">About service containers</a>.&quot;</p><h4 id="example-using-localhost"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-using-localhost"><span class="icon icon-link"></span></a>Example using localhost</h4><p>This example creates two services: nginx and redis. When you specify the Docker host port but not the container port, the container port is randomly assigned to a free port. <!-- -->{<!-- -->% data variables.product.prodname_dotcom %<!-- -->}<!-- --> sets the assigned container port in the <!-- -->{<!-- -->% raw %<!-- -->}<code>$<!-- -->{<!-- -->{<!-- -->job.services.&lt;service_name&gt;.ports<!-- -->}<!-- -->}</code>{<!-- -->% endraw %<!-- -->}<!-- --> context. In this example, you can access the service container ports using the <!-- -->{<!-- -->% raw %<!-- -->}<code>$<!-- -->{<!-- -->{<!-- --> job.services.nginx.ports[&#x27;8080&#x27;] <!-- -->}<!-- -->}</code>{<!-- -->% endraw %<!-- -->}<!-- --> and <!-- -->{<!-- -->% raw %<!-- -->}<code>$<!-- -->{<!-- -->{<!-- --> job.services.redis.ports[&#x27;6379&#x27;] <!-- -->}<!-- -->}</code>{<!-- -->% endraw %<!-- -->}<!-- --> contexts.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">services</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">nginx</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation">:</span><span class="token plain"> nginx</span></div><div class="token-line"><span class="token plain">    </span><span class="token comment"># Map port 8080 on the Docker host to port 80 on the nginx container</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">ports</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> 8080</span><span class="token punctuation">:</span><span class="token number">80</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">redis</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation">:</span><span class="token plain"> redis</span></div><div class="token-line"><span class="token plain">    </span><span class="token comment"># Map TCP port 6379 on Docker host to a random free port on the Redis container</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">ports</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">-</span><span class="token plain"> 6379/tcp</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_idservicesservice_idimage"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idimage"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.image</code></h3><p>The Docker image to use as the service container to run the action. The value can be the Docker Hub image name or a <!-- -->{<!-- -->% if enterpriseServerVersions contains currentVersion and currentVersion ver_lt &quot;<a href="/github-actions/mailto:enterprise-server@2.23">enterprise-server@2.23</a>&quot; %<!-- -->}<!-- -->public<!-- -->{<!-- -->% endif %<!-- -->}<!-- --> registry name.</p><p>{<!-- -->% if currentVersion == &quot;free-pro-team@latest&quot; or currentVersion ver_gt &quot;<a href="/github-actions/mailto:enterprise-server@2.22">enterprise-server@2.22</a>&quot; %<!-- -->}</p><h3 id="jobsjob_idservicesservice_idcredentials"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idcredentials"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.credentials</code></h3><p>{<!-- -->% data reusables.actions.registry-credentials %<!-- -->}</p><h4 id="example-17"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-17"><span class="icon icon-link"></span></a>Example</h4><p>{<!-- -->% raw %<!-- -->}</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">services</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">myservice1</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation">:</span><span class="token plain"> ghcr.io/owner/myservice1</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">credentials</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">username</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> github.actor </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">password</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> secrets.ghcr_token </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">myservice2</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation">:</span><span class="token plain"> dockerhub_org/myservice2</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">credentials</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">username</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> secrets.DOCKER_USER </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">password</span><span class="token punctuation">:</span><span class="token plain"> $</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token plain"> secrets.DOCKER_PASSWORD </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>{<!-- -->% endraw %<!-- -->}<!-- -->{<!-- -->% endif %<!-- -->}</p><h3 id="jobsjob_idservicesservice_idenv"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idenv"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.env</code></h3><p>Sets a <code>map</code> of environment variables in the service container.</p><h3 id="jobsjob_idservicesservice_idports"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idports"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.ports</code></h3><p>Sets an <code>array</code> of ports to expose on the service container.</p><h3 id="jobsjob_idservicesservice_idvolumes"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idvolumes"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.volumes</code></h3><p>Sets an <code>array</code> of volumes for the service container to use. You can use volumes to share data between services or other steps in a job. You can specify named Docker volumes, anonymous Docker volumes, or bind mounts on the host.</p><p>To specify a volume, you specify the source and destination path:</p><p><code>&lt;source&gt;:&lt;destinationPath&gt;</code>.</p><p>The <code>&lt;source&gt;</code> is a volume name or an absolute path on the host machine, and <code>&lt;destinationPath&gt;</code> is an absolute path in the container.</p><h4 id="example-18"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#example-18"><span class="icon icon-link"></span></a>Example</h4><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token key atrule">volumes</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> my_docker_volume</span><span class="token punctuation">:</span><span class="token plain">/volume_mount</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> /data/my_data</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">-</span><span class="token plain"> /source/directory</span><span class="token punctuation">:</span><span class="token plain">/destination/directory</span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><h3 id="jobsjob_idservicesservice_idoptions"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#jobsjob_idservicesservice_idoptions"><span class="icon icon-link"></span></a><code>jobs.&lt;job_id&gt;.services.&lt;service_id&gt;.options</code></h3><p>Additional Docker container resource options. For a list of options, see &quot;<a target="_blank" rel="noopener noreferrer" href="https://docs.docker.com/engine/reference/commandline/create/#options"><code>docker create</code> options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.&quot;</p><h3 id="filter-pattern-cheat-sheet"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#filter-pattern-cheat-sheet"><span class="icon icon-link"></span></a>Filter pattern cheat sheet</h3><p>You can use special characters in path, branch, and tag filters.</p><ul><li><code>*</code>: Matches zero or more characters, but does not match the <code>/</code> character. For example, <code>Octo*</code> matches <code>Octocat</code>.</li><li><code>**</code>: Matches zero or more of any character.</li><li><code>?</code>: Matches zero or one single character. For example, <code>Octoc?t</code> matches <code>Octocat</code>.</li><li><code>+</code>: Matches one or more of the preceding character.</li><li><code>[]</code> Matches one character listed in the brackets or included in ranges. Ranges can only include <code>a-z</code>, <code>A-Z</code>, and <code>0-9</code>. For example, the range<code>[0-9a-z]</code> matches any digit or lowercase letter. For example, <code>[CB]at</code> matches <code>Cat</code> or <code>Bat</code> and <code>[1-2]00</code> matches <code>100</code> and <code>200</code>.</li><li><code>!</code>: At the start of a pattern makes it negate previous positive patterns. It has no special meaning if not the first character.</li></ul><p>The characters <code>*</code>, <code>[</code>, and <code>!</code> are special characters in YAML. If you start a pattern with <code>*</code>, <code>[</code>, or <code>!</code>, you must enclose the pattern in quotes.</p><div class="__dumi-default-code-block"><pre class="prism-code language-yaml"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># Valid</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token string">&#x27;**/README.md&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># Invalid - creates a parse error that</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># prevents your workflow from running.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">-</span><span class="token plain"> </span><span class="token important">**/README.md</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div><p>For more information about branch, tag, and path filter syntax, see &quot;<a href="/github-actions/workflow-syntax#onpushpull_requestbranchestags"><code>on.&lt;push|pull_request&gt;.&lt;branches|tags&gt;</code></a>&quot; and &quot;<a href="/github-actions/workflow-syntax#onpushpull_requestpaths"><code>on.&lt;push|pull_request&gt;.paths</code></a>.&quot;</p><h4 id="patterns-to-match-branches-and-tags"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#patterns-to-match-branches-and-tags"><span class="icon icon-link"></span></a>Patterns to match branches and tags</h4><table><thead><tr><th>Pattern</th><th>Description</th><th>Example matches</th></tr></thead><tbody><tr><td><code>feature/*</code></td><td>The <code>*</code> wildcard matches any character, but does not match slash (<code>/</code>).</td><td><code>feature/my-branch</code><br/><br/><code>feature/your-branch</code></td></tr><tr><td><code>feature/**</code></td><td>The <code>**</code> wildcard matches any character including slash (<code>/</code>) in branch and tag names.</td><td><code>feature/beta-a/my-branch</code><br/><br/><code>feature/your-branch</code><br/><br/><code>feature/mona/the/octocat</code></td></tr><tr><td><code>main</code><br/><br/><code>releases/mona-the-octcat</code></td><td>Matches the exact name of a branch or tag name.</td><td><code>main</code><br/><br/><code>releases/mona-the-octocat</code></td></tr><tr><td><code>&#x27;*&#x27;</code></td><td>Matches all branch and tag names that don&#x27;t contain a slash (<code>/</code>). The <code>*</code> character is a special character in YAML. When you start a pattern with <code>*</code>, you must use quotes.</td><td><code>main</code><br/><br/><code>releases</code></td></tr><tr><td><code>&#x27;**&#x27;</code></td><td>Matches all branch and tag names. This is the default behavior when you don&#x27;t use a <code>branches</code> or <code>tags</code> filter.</td><td><code>all/the/branches</code><br/><br/><code>every/tag</code></td></tr><tr><td><code>&#x27;*feature&#x27;</code></td><td>The <code>*</code> character is a special character in YAML. When you start a pattern with <code>*</code>, you must use quotes.</td><td><code>mona-feature</code><br/><br/><code>feature</code><br/><br/><code>ver-10-feature</code></td></tr><tr><td><code>v2*</code></td><td>Matches branch and tag names that start with <code>v2</code>.</td><td><code>v2</code><br/><br/><code>v2.0</code><br/><br/><code>v2.9</code></td></tr><tr><td><code>v[12].[0-9]+.[0-9]+</code></td><td>Matches all semantic versioning branches and tags with major version 1 or 2</td><td><code>v1.10.1</code><br/><br/><code>v2.0.0</code></td></tr></tbody></table><h4 id="patterns-to-match-file-paths"><a aria-hidden="true" tabindex="-1" href="/github-actions/workflow-syntax#patterns-to-match-file-paths"><span class="icon icon-link"></span></a>Patterns to match file paths</h4><p>Path patterns must match the whole path, and start from the repository&#x27;s root.</p><table><thead><tr><th>Pattern</th><th>Description of matches</th><th>Example matches</th></tr></thead><tbody><tr><td><code>&#x27;*&#x27;</code></td><td>The <code>*</code> wildcard matches any character, but does not match slash (<code>/</code>). The <code>*</code> character is a special character in YAML. When you start a pattern with <code>*</code>, you must use quotes.</td><td><code>README.md</code><br/><br/><code>server.rb</code></td></tr><tr><td><code>&#x27;*.jsx?&#x27;</code></td><td>The <code>?</code> character matches zero or one of the preceding character.</td><td><code>page.js</code><br/><br/><code>page.jsx</code></td></tr><tr><td><code>&#x27;**&#x27;</code></td><td>The <code>**</code> wildcard matches any character including slash (<code>/</code>). This is the default behavior when you don&#x27;t use a <code>path</code> filter.</td><td><code>all/the/files.md</code></td></tr><tr><td><code>&#x27;*.js&#x27;</code></td><td>The <code>*</code> wildcard matches any character, but does not match slash (<code>/</code>). Matches all <code>.js</code> files at the root of the repository.</td><td><code>app.js</code><br/><br/><code>index.js</code></td></tr><tr><td><code>&#x27;**.js&#x27;</code></td><td>Matches all <code>.js</code> files in the repository.</td><td><code>index.js</code><br/><br/><code>js/index.js</code><br/><br/><code>src/js/app.js</code></td></tr><tr><td><code>docs/*</code></td><td>All files within the root of the <code>docs</code> directory, at the root of the repository.</td><td><code>docs/README.md</code><br/><br/><code>docs/file.txt</code></td></tr><tr><td><code>docs/**</code></td><td>Any files in the <code>/docs</code> directory at the root of the repository.</td><td><code>docs/README.md</code><br/><br/><code>docs/mona/octocat.txt</code></td></tr><tr><td><code>docs/**/*.md</code></td><td>A file with a <code>.md</code> suffix anywhere in the <code>docs</code> directory.</td><td><code>docs/README.md</code><br/><br/><code>docs/mona/hello-world.md</code><br/><br/><code>docs/a/markdown/file.md</code></td></tr><tr><td><code>&#x27;**/docs/**&#x27;</code></td><td>Any files in a <code>docs</code> directory anywhere in the repository.</td><td><code>/docs/hello.md</code><br/><br/><code>dir/docs/my-file.txt</code><br/><br/><code>space/docs/plan/space.doc</code></td></tr><tr><td><code>&#x27;**/README.md&#x27;</code></td><td>A README.md file anywhere in the repository.</td><td><code>README.md</code><br/><br/><code>js/README.md</code></td></tr><tr><td><code>&#x27;**/*src/**&#x27;</code></td><td>Any file in a folder with a <code>src</code> suffix anywhere in the repository.</td><td><code>a/src/app.js</code><br/><br/><code>my-src/code/js/app.js</code></td></tr><tr><td><code>&#x27;**/*-post.md&#x27;</code></td><td>A file with the suffix <code>-post.md</code> anywhere in the repository.</td><td><code>my-post.md</code><br/><br/><code>path/their-post.md</code></td></tr><tr><td><code>&#x27;**/migrate-*.sql&#x27;</code></td><td>A file with the prefix <code>migrate-</code> and suffix <code>.sql</code> anywhere in the repository.</td><td><code>migrate-10909.sql</code><br/><br/><code>db/migrate-v1.0.sql</code><br/><br/><code>db/sept/migrate-v1.sql</code></td></tr><tr><td><code>*.md</code><br/><br/><code>!README.md</code></td><td>Using an exclamation mark (<code>!</code>) in front of a pattern negates it. When a file matches a pattern and also matches a negative pattern defined later in the file, the file will not be included.</td><td><code>hello.md</code><br/><br/><em>Does not match</em><br/><br/><code>README.md</code><br/><br/><code>docs/hello.md</code></td></tr><tr><td><code>*.md</code><br/><br/><code>!README.md</code><br/><br/><code>README*</code></td><td>Patterns are checked sequentially. A pattern that negates a previous pattern will re-include file paths.</td><td><code>hello.md</code><br/><br/><code>README.md</code><br/><br/><code>README.doc</code></td></tr></tbody></table></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/youngjuning/youngjuning.github.io/edit/main/docs/github-actions/workflow-syntax.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">3/12/2021 08:09:54</span></div></div><div class="ant-back-top"></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/umi.89d269f8.js"></script>
  </body>
</html>
