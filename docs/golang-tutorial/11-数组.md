---
title: 数组
cover:
tags: [掘金专栏]
order: 11
---

> 大家好，我是 [@洛竹](https://github.com/youngjuning)
>
> 本文首发于 [洛竹的官方网站](https://youngjuning.js.org/)
>
> 本文翻译自 [Golang tutorial series](https://golangbot.com/learn-golang-series/)
>
> 本文同步于公众号洛竹早茶馆，转载请联系作者。

An array is a collection of elements that belong to the same type. For example, the collection of integers 5, 8, 9, 79, 76 forms an array. Mixing values of different types, for example, an array that contains both strings and integers is not allowed in Go.

## Declaration

An array belongs to type `[n]T`. `n` denotes the number of elements in an array and `T` represents the type of each element. The number of elements `n` is also a part of the type\(We will discuss this in more detail shortly.\)

There are different ways to declare arrays. Let's look at them one by one.

```go
package main

import (
    "fmt"
)


func main() {
    var a [3]int //int array with length 3
    fmt.Println(a)
}
```

[Run in playground](https://play.golang.org/p/Zvgh82u0ej)

`var a[3]int` declares an integer array of length 3. All elements in an array are automatically assigned the zero value of the array type. In this case `a` is an integer array and hence all elements of `a` are assigned to `0`, the zero value of int. Running the above program will print

```
[0 0 0]
```

The index of an array starts from `0` and ends at `length - 1`. Let's assign some values to the above array.

```go
package main

import (
    "fmt"
)


func main() {
    var a [3]int //int array with length 3
    a[0] = 12 // array index starts at 0
    a[1] = 78
    a[2] = 50
    fmt.Println(a)
}
```

[Run in playground](https://play.golang.org/p/WF0Uj8sv39)

a[0] assigns value to the first element of the array. The program will print

```
[12 78 50]
```

Let's create the same array using the **short hand declaration**.

```go
package main

import (
    "fmt"
)

func main() {
    a := [3]int{12, 78, 50} // short hand declaration to create array
    fmt.Println(a)
}
```

[Run in playground](https://play.golang.org/p/NKOV04zgI6)

The program above will print the same output

```
[12 78 50]
```

It is not necessary that all elements in an array have to be assigned a value during short hand declaration.

```go
package main

import (
    "fmt"
)

func main() {
    a := [3]int{12}
    fmt.Println(a)
}
```

[Run in playground](https://play.golang.org/p/AdPH0kXRly)

In the above program in line no. 8 `a := [3]int{12}` declares an array of length 3 but is provided with only one value `12`. The remaining 2 elements are assigned `0` automatically. This program will print

```
[12 0 0]
```

You can even ignore the length of the array in the declaration and replace it with `...` and let the compiler find the length for you. This is done in the following program.

```go
package main

import (
    "fmt"
)

func main() {
    a := [...]int{12, 78, 50} // ... makes the compiler determine the length
    fmt.Println(a)
}
```

[Run in playground](https://play.golang.org/p/_fVmr6KGDh)

**The size of the array is a part of the type.** Hence `[5]int` and `[25]int` are distinct types. Because of this, arrays cannot be resized. Don't worry about this restriction since `slices` exist to overcome this.

```go
package main

func main() {
    a := [3]int{5, 78, 8}
    var b [5]int
    b = a //not possible since [3]int and [5]int are distinct types
}
```

[Run in playground](https://play.golang.org/p/kBdot3pXSB)

In line no. 6 of the program above, we are trying to assign a variable of type `[3]int` to a variable of type `[5]int` which is not allowed and hence the compiler will print the following error

```
./prog.go:6:7: cannot use a (type [3]int) as type [5]int in assignment
```

## Arrays are value types

Arrays in Go are value types and not reference types. This means that when they are assigned to a new variable, a copy of the original array is assigned to the new variable. If changes are made to the new variable, it will not be reflected in the original array.

```go
package main

import "fmt"

func main() {
    a := [...]string{"USA", "China", "India", "Germany", "France"}
    b := a // a copy of a is assigned to b
    b[0] = "Singapore"
    fmt.Println("a is ", a)
    fmt.Println("b is ", b)
}
```

[Run in playground](https://play.golang.org/p/-ncGk1mqPd)

In the above program in line no. 7, a copy of `a` is assigned to `b`. In line no. 8, the first element of `b` is changed to `Singapore`. This will not reflect in the original array `a`. The program will print,

```
a is [USA China India Germany France]
b is [Singapore China India Germany France]
```

Similarly when arrays are passed to functions as parameters, they are passed by value and the original array is unchanged.

```go
package main

import "fmt"

func changeLocal(num [5]int) {
    num[0] = 55
    fmt.Println("inside function ", num)

}
func main() {
    num := [...]int{5, 6, 7, 8, 8}
    fmt.Println("before passing to function ", num)
    changeLocal(num) //num is passed by value
    fmt.Println("after passing to function ", num)
}
```

[Run in playground](https://play.golang.org/p/e3U75Q8eUZ)

In the above program in line no. 13, the array `num` is actually passed by value to the function `changeLocal` and hence will not change because of the function call. This program will print,

```
before passing to function  [5 6 7 8 8]
inside function  [55 6 7 8 8]
after passing to function  [5 6 7 8 8]
```

## Length of an array

The length of the array is found by passing the array as parameter to the `len` function.

```go
package main

import "fmt"

func main() {
    a := [...]float64{67.7, 89.8, 21, 78}
    fmt.Println("length of a is",len(a))
}
```

[Run in playground](https://play.golang.org/p/UrIeNlS0RN)

The output of the above program is

```
length of a is 4
```

### Iterating arrays using range

The `for` loop can be used to iterate over elements of an array.

```go
package main

import "fmt"

func main() {
    a := [...]float64{67.7, 89.8, 21, 78}
    for i := 0; i < len(a); i++ { //looping from 0 to the length of the array
        fmt.Printf("%d th element of a is %.2f\n", i, a[i])
    }
}
```

[Run in playground](https://play.golang.org/p/80ejSTACO6)

The above program uses a `for` loop to iterate over the elements of the array starting from index `0` to `length of the array \- 1`. This program works and will print,

```
0 th element of a is 67.70
1 th element of a is 89.80
2 th element of a is 21.00
3 th element of a is 78.00
```

Go provides a better and concise way to iterate over an array by using the **range** form of the `for` loop. `range` returns both the index and the value at that index. Let's rewrite the above code using range. We will also find the sum of all elements of the array.

```go
package main

import "fmt"

func main() {
    a := [...]float64{67.7, 89.8, 21, 78}
    sum := float64(0)
    for i, v := range a {//range returns both the index and value
        fmt.Printf("%d the element of a is %.2f\n", i, v)
        sum += v
    }
    fmt.Println("\nsum of all elements of a",sum)
}
```

[Run in playground](https://play.golang.org/p/Ji6FRon36m)

line no. 8 `for i, v := range a` of the above program is the range form of the for loop. It will return both the index and the value at that index. We print the values and also calculate the sum of all elements of the array `a`. The **output** of the program is,

```
0 the element of a is 67.70
1 the element of a is 89.80
2 the element of a is 21.00
3 the element of a is 78.00

sum of all elements of a 256.5
```

In case you want only the value and want to ignore the index, you can do this by replacing the index with the `_` blank identifier.

```go
for _, v := range a { //ignores index
}
```

The above for loop ignores the index. Similarly, the value can also be ignored.

### Multidimensional arrays

The arrays we created so far are all single dimension. It is possible to create multidimensional arrays.

```go
package main

import (
    "fmt"
)

func printarray(a [3][2]string) {
    for _, v1 := range a {
        for _, v2 := range v1 {
            fmt.Printf("%s ", v2)
        }
        fmt.Printf("\n")
    }
}

func main() {
    a := [3][2]string{
        {"lion", "tiger"},
        {"cat", "dog"},
        {"pigeon", "peacock"}, //this comma is necessary. The compiler will complain if you omit this comma
    }
    printarray(a)
    var b [3][2]string
    b[0][0] = "apple"
    b[0][1] = "samsung"
    b[1][0] = "microsoft"
    b[1][1] = "google"
    b[2][0] = "AT&T"
    b[2][1] = "T-Mobile"
    fmt.Printf("\n")
    printarray(b)
}
```

[Run in playground](https://play.golang.org/p/InchXI4yY8)

In the above program in line no. 17, a two dimensional string array `a` has been declared using short hand syntax. The comma at the end of line no. 20 is necessary. This is because of the fact that the lexer automatically inserts semicolons according to simple rules. Please read <https://golang.org/doc/effective_go.html#semicolons> if you are interested to know more about why a semicolon is needed.

Another 2d array `b` is declared in line no. 23 and strings are added to it one by one for each index. This is another way of initializing a 2d array.

The `printarray` function in line no. 7 uses two for range loops to print the contents of 2d arrays. The above program will print

```
lion tiger
cat dog
pigeon peacock

apple samsung
microsoft google
AT&T T-Mobile
```

That's it for arrays. Although arrays seem to be flexible enough, they come with the restriction that they are of fixed length. It is not possible to increase the length of an array. This is where **slices** come into the picture. In fact in Go, slices are more common than conventional arrays.

## 结语

关注公众号`洛竹早茶馆`，一个持续分享编程知识的地方。

- `点赞`等于学会，`在看`等于精通
- 最后祝大家 2021 学习进步，升职加薪

![](https://youngjuning.js.org/img/luozhu.png)
